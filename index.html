<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Ai</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <style>
        #aiResponse, #output {
            background-color: black;
            color: #00FF00; /* Set the text color to green */
        }

        #output {
            margin-top: 10px;
        }
    </style>
</head>
<body>
<h1>AI</h1>
<input type="text" id="userInput" placeholder="Enter your question" style="background-color: white;">
<br>Code:<br>
<textarea id="aiResponse" rows="10" cols="50" oninput="runCode()" readonly></textarea>
<br>Output:<br>
<textarea id="output" rows="10" cols="50" readonly></textarea>

<script>
    let typingTimer;
    let aiResponseValue = ""; // Variable to store the AI response

    const doneTypingInterval = 500; // Adjust the delay (in milliseconds) as per your preference

    async function getAIResponse() {
        clearTimeout(typingTimer);
        const userInput = document.getElementById('userInput').value;
        if (userInput) {
            typingTimer = setTimeout(async function () {
                const response = await fetch(`http://localhost:5000/process_input/${encodeURIComponent(userInput)}`);
                const responseData = await response.json();
                aiResponseValue = responseData.response; // Store the AI response
                document.getElementById('aiResponse').value = aiResponseValue; // Update the text area
                runCode(); // Execute the code automatically when AI response is updated
            }, doneTypingInterval);
        }
    }

    function runCode() {
        const code = document.getElementById('aiResponse').value; // Get the code from "Code" text area
        if (code) {
            fetch('http://localhost:5000/process_input/run')
                .then(response => response.json())
                .then(data => {
                    const output = data.response;
                    document.getElementById('output').value = output;
                })
                .catch(error => console.error(error));
        }
    }

    document.getElementById('userInput').addEventListener('input', getAIResponse);
    document.getElementById('aiResponse').addEventListener('keyup', runCode); // Add event listener for "Code" textarea
</script>
</body>
</html>
